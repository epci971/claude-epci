# Refactoring Metrics Report

> Template for final metrics report generated in step-07-report.md

---

# Refactoring Report: {TARGET}

> Generated: {TIMESTAMP}
> Duration: {DURATION}
> Scope: {SCOPE}

---

## Executive Summary

| Metric | Before | After | Delta | Trend |
|--------|--------|-------|-------|-------|
| Lines of Code | {LOC_BEFORE} | {LOC_AFTER} | {LOC_DELTA} ({LOC_PERCENT}%) | {LOC_TREND} |
| Cyclomatic Complexity (avg) | {CC_BEFORE} | {CC_AFTER} | {CC_DELTA} ({CC_PERCENT}%) | {CC_TREND} |
| Maintainability Index (avg) | {MI_BEFORE} | {MI_AFTER} | {MI_DELTA} ({MI_PERCENT}%) | {MI_TREND} |

**Overall Assessment**: {ASSESSMENT}

---

## Transformations Applied

| # | Pattern | Description | Status | Risk |
|---|---------|-------------|--------|------|
{FOREACH TRANSFORMATION}
| {T_ID} | {T_PATTERN} | {T_DESCRIPTION} | {T_STATUS} | {T_RISK} |
{/FOREACH}

---

## Code Smells

### Resolved

| Smell | Location | Resolution |
|-------|----------|------------|
{FOREACH SMELL_RESOLVED}
| {SMELL_TYPE} | {SMELL_LOCATION} | {SMELL_RESOLUTION} |
{/FOREACH}

### Remaining (if any)

| Smell | Location | Severity | Reason Not Addressed |
|-------|----------|----------|---------------------|
{FOREACH SMELL_REMAINING}
| {SMELL_TYPE} | {SMELL_LOCATION} | {SMELL_SEVERITY} | {SMELL_REASON} |
{/FOREACH}

---

## Files Changed

### Modified ({MODIFIED_COUNT})

| File | LOC Delta | CC Delta | MI Delta |
|------|-----------|----------|----------|
{FOREACH MODIFIED_FILE}
| `{FILE_PATH}` | {FILE_LOC_DELTA} | {FILE_CC_DELTA} | {FILE_MI_DELTA} |
{/FOREACH}

### Created ({CREATED_COUNT})

| File | Purpose | LOC | CC | MI |
|------|---------|-----|----|----|
{FOREACH CREATED_FILE}
| `{FILE_PATH}` | {FILE_PURPOSE} | {FILE_LOC} | {FILE_CC} | {FILE_MI} |
{/FOREACH}

### Deleted ({DELETED_COUNT})

| File | Reason |
|------|--------|
{FOREACH DELETED_FILE}
| `{FILE_PATH}` | {DELETE_REASON} |
{/FOREACH}

---

## Detailed Metrics by File

{FOREACH AFFECTED_FILE}

### {FILE_PATH}

| Metric | Before | After | Delta | Assessment |
|--------|--------|-------|-------|------------|
| LOC | {LOC_BEFORE} | {LOC_AFTER} | {LOC_DELTA} | {LOC_ASSESSMENT} |
| CC | {CC_BEFORE} | {CC_AFTER} | {CC_DELTA} | {CC_ASSESSMENT} |
| MI | {MI_BEFORE} | {MI_AFTER} | {MI_DELTA} | {MI_ASSESSMENT} |
| Methods | {METHODS_BEFORE} | {METHODS_AFTER} | {METHODS_DELTA} | - |
| Avg Method Length | {AML_BEFORE} | {AML_AFTER} | {AML_DELTA} | - |

{/FOREACH}

---

## Test Results

| Metric | Value |
|--------|-------|
| Total Tests | {TEST_TOTAL} |
| Passing | {TEST_PASSING} |
| Failed | {TEST_FAILED} |
| Skipped | {TEST_SKIPPED} |
| Coverage | {TEST_COVERAGE}% |
| Coverage Delta | {COVERAGE_DELTA}% |

{IF TEST_FAILED > 0}
### Failed Tests

| Test | Reason |
|------|--------|
{FOREACH FAILED_TEST}
| {TEST_NAME} | {FAILURE_REASON} |
{/FOREACH}
{/IF}

---

## Reviews

{IF REVIEWS_DONE}

| Reviewer | Status | Summary |
|----------|--------|---------|
{FOREACH REVIEW}
| {REVIEWER} | {REVIEW_STATUS} | {REVIEW_SUMMARY} |
{/FOREACH}

### Review Findings

{FOREACH FINDING}
- **[{FINDING_SEVERITY}]** {FINDING_MESSAGE} (`{FINDING_FILE}:{FINDING_LINE}`)
{/FOREACH}

{ELSE}
*Reviews skipped (scope: single or --turbo mode)*
{/IF}

---

## Dependency Changes

{IF DEPENDENCY_GRAPH_CHANGED}

### Before
```
{DEP_GRAPH_BEFORE}
```

### After
```
{DEP_GRAPH_AFTER}
```

### Changes
- Removed: {DEP_REMOVED_COUNT} dependencies
- Added: {DEP_ADDED_COUNT} dependencies
- Net: {DEP_NET_CHANGE}

{ELSE}
*No significant dependency changes*
{/IF}

---

## Metrics Visualization

```
BEFORE                          AFTER
┌─────────────────┐            ┌─────────────────┐
│ LOC: {LOC_B}    │     →      │ LOC: {LOC_A}    │
│ CC:  {CC_B}     │     →      │ CC:  {CC_A}     │
│ MI:  {MI_B}     │     →      │ MI:  {MI_A}     │
└─────────────────┘            └─────────────────┘
```

### Improvement Radar

```
         CC
          │
    100 ──┼─────── Target
          │   ★
     50 ──┼──●────
          │
      0 ──┼──────────── MI
          │
         LOC

● Before  ★ After
```

---

## Recommendations

### Immediate Actions

{FOREACH RECOMMENDATION_IMMEDIATE}
1. {RECOMMENDATION}
{/FOREACH}

### Future Considerations

{FOREACH RECOMMENDATION_FUTURE}
- {RECOMMENDATION}
{/FOREACH}

---

## Session Metadata

| Property | Value |
|----------|-------|
| Refactor ID | {REFACTOR_ID} |
| Started | {START_TIME} |
| Completed | {END_TIME} |
| Stack | {STACK} |
| Patterns Used | {PATTERNS_LIST} |
| Metrics Tool | {METRICS_TOOL} |
| Atomic Commits | {ATOMIC_FLAG} |

---

*Report generated by /refactor skill - EPCI v6.0*
*Tool: {METRICS_TOOL} | Estimation confidence: {CONFIDENCE}%*
