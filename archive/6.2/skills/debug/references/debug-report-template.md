# Debug Report Template

## Overview

Template for Debug Reports generated in COMPLEX route.
Location: `docs/debug/{slug}-{date}.md`

## Full Template

```markdown
# Debug Report: {slug}

**Date**: {YYYY-MM-DD}
**Duration**: {N} minutes
**Route**: COMPLEX
**Author**: Claude Debug Workflow

---

## Summary

{1-2 paragraph executive summary of the bug and fix}

---

## Bug Information

### Original Report
{verbatim user input or ticket reference}

### Error Details
- **Type**: {error type}
- **Message**: `{error message}`
- **Location**: `{file}:{line}`
- **Environment**: {dev | staging | prod}
- **Frequency**: {Always | Sometimes | Rare}

### Stack Trace
```
{full stack trace}
```

### Reproduction Steps
1. {step 1}
2. {step 2}
3. {step 3 - error occurs}

---

## Investigation

### Evidence Gathered
| Source | Finding |
|--------|---------|
| Stack trace | {finding} |
| git log | {finding} |
| project-memory | {finding} |
| Codebase search | {finding} |

### Research Conducted
| Source | Query | Results |
|--------|-------|---------|
| Context7 | {query} | {summary} |
| WebSearch | {query} | {summary} |

### Hypotheses Investigated

#### H1: {title} [Confidence: {N}%] ‚≠ê CONFIRMED
- **Statement**: {hypothesis}
- **Evidence**: {evidence list}
- **Quick Check**: {what was done}
- **Result**: CONFIRMED

#### H2: {title} [Confidence: {N}%]
- **Statement**: {hypothesis}
- **Status**: Not investigated (H1 confirmed)

#### H3: {title} [Confidence: {N}%]
- **Statement**: {hypothesis}
- **Status**: Not investigated

---

## Root Cause

### Technical Analysis
{detailed explanation of root cause}

### Contributing Factors
- {factor 1}
- {factor 2}
- {factor 3}

### Timeline
| Event | Date | Impact |
|-------|------|--------|
| {triggering change} | {date} | {how it caused bug} |
| {bug first reported} | {date} | {user impact} |

---

## Solution

### Selected Approach
- **Solution**: {title}
- **Score**: {N}/5.0
- **Rationale**: {why this was chosen}

### Alternatives Considered
| Solution | Score | Why Not Chosen |
|----------|-------|----------------|
| {alt 1} | {N} | {reason} |
| {alt 2} | {N} | {reason} |

### Implementation

#### Changes Made
| File | Change | LOC |
|------|--------|-----|
| `{path1}` | {description} | +{N}/-{N} |
| `{path2}` | {description} | +{N}/-{N} |

#### Code Diff Summary
```diff
{key changes in diff format}
```

---

## Testing

### Regression Test Added
**File**: `{test_path}`
**Test**: `{test_name}`

```{lang}
{test code}
```

### Test Results
```
Tests: {N} passed, 0 failed
Time: {X}s
Coverage: {N}%
```

### Manual Verification
- [ ] Bug no longer reproducible
- [ ] Related functionality works
- [ ] No regressions in affected area

---

## Reviews

### Code Review
- **Reviewer**: @code-reviewer
- **Verdict**: {APPROVED | APPROVED_WITH_FIXES | NEEDS_REVISION}
- **Comments**: {summary}

### Security Audit
- **Reviewer**: @security-auditor
- **Verdict**: {APPROVED | NEEDS_FIXES | N/A}
- **Comments**: {summary}

### QA Review
- **Reviewer**: @qa-reviewer
- **Verdict**: {APPROVED | NEEDS_IMPROVEMENT | N/A}
- **Comments**: {summary}

---

## Lessons Learned

### What Went Well
- {positive 1}
- {positive 2}

### What Could Improve
- {improvement 1}
- {improvement 2}

### Future Prevention
- {prevention measure 1}
- {prevention measure 2}

---

## Related

### Similar Bugs
- {link to similar bug if any}

### Documentation Updates
- {any docs that need updating}

### Follow-up Tasks
- [ ] {task 1}
- [ ] {task 2}

---

## Metrics

| Metric | Value |
|--------|-------|
| Time to diagnose | {N} min |
| Time to fix | {N} min |
| Total duration | {N} min |
| Hypotheses tested | {N} |
| Files modified | {N} |
| Tests added | {N} |
| LOC changed | +{N}/-{N} |

---

*Report generated by /debug v6.0*
*Pattern stored in project-memory: {pattern_id}*
```

## Section Guidelines

### Summary
- 1-2 paragraphs max
- Non-technical where possible
- Include: what broke, why, how fixed

### Bug Information
- Include verbatim error message
- Full stack trace (collapsible if long)
- Exact reproduction steps

### Investigation
- Document all sources checked
- Show hypothesis tree
- Mark confirmed hypothesis

### Root Cause
- Technical but clear explanation
- Include contributing factors
- Timeline if relevant (recent changes)

### Solution
- Explain why this approach was chosen
- Document alternatives considered
- Include key code changes

### Testing
- Include actual test code
- Show test results
- Document manual verification

### Reviews
- Include all reviewer verdicts
- Summarize key feedback

### Lessons Learned
- Be honest about what could improve
- Include actionable prevention measures

## File Naming

Format: `{slug}-{YYYY-MM-DD}.md`

Examples:
- `cache-stale-data-2026-01-26.md`
- `auth-session-timeout-2026-01-26.md`
- `api-orders-500-error-2026-01-26.md`

## When to Skip (--no-report)

Report can be skipped if:
- Bug is simple (escalated from QUICK)
- No significant learnings
- User explicitly requests `--no-report`

In this case, only summary is output inline.
